<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Barastion Dreamscape – Dziennik Snów. Osobista podróż przez świat snów.">
    <meta name="keywords" content="dziennik snów, Barastion Dreamscape, interpretacja snów, świadome śnienie, zapisywanie snów">
    <meta name="author" content="Barastion">
    <meta property="og:title" content="Barastion Dreamscape – Dziennik Snów">
    <meta property="og:description" content="Tam, gdzie kończy się rzeczywistość, a zaczyna sen – spojrzenie w zakamarki podświadomości.">
    <meta property="og:image" content="Dreamscape_logo.jpg">
    <meta property="og:url" content="https://barastion.github.io/Dreamscape/">
    <meta property="og:type" content="website">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com https://*.firebaseio.com https://*.firebasedatabase.app https://*.web.app; connect-src 'self' https://*.firebaseio.com https://*.firebasedatabase.app wss://*.firebasedatabase.app https://*.web.app https://identitytoolkit.googleapis.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:; frame-src 'self' https://dziennik-snow.firebaseapp.com;">
    <title>Barastion Dreamscape – Dziennik Snów</title>
    <link rel="stylesheet" href="style.css" onerror="console.error('Błąd ładowania style.css');">
    <link rel="icon" type="image/png" href="logo.png">
</head>
<body>
    <div id="networkStatus" class="network-status"></div>
    <div class="container">
        <div class="content-wrapper">
            <header class="header">
                <div class="logo-frame">
                    <img src="Dreamscape_logo.jpg" alt="Barastion Dreamscape Logo" class="logo">
                </div>
                <a href="https://barastion.github.io/Dreamscape/" class="header-link">
                    <h1>Barastion Dreamscape</h1>
                    <p class="header-subtitle">– Dziennik Snów</p>
                </a>
                <p class="header-subtitle bold">Osobista podróż do zakątków wyobraźni</p>
            </header>

            <main>
                <div class="section-background">
                    <section class="intro-container section-box">
                        <h2>Słowem wstępu...</h2>
                        <div class="intro-content">
                            <p class="intro-text">
                                Z początkiem 2025 roku coś we mnie drgnęło, jakby głęboko ukryta część mojej świadomości nagle postanowiła przemówić. Sny, które wcześniej traktowałem jako przypadkowe, zaczęły układać się w zaskakującą narrację. Każda kolejna noc przynosiła obrazy pełne symboli, których znaczenie pozostawało dla mnie nieuchwytne, ale jednocześnie hipnotyzujące. Czułem, że te sny miały swój cel – że niosły ze sobą coś więcej niż tylko odzwierciedlenie codziennych myśli. Jakby otworzyły przede mną drzwi do nowego świata, w którym mogę eksplorować nieznane horyzonty i odkrywać zakamarki własnej świadomości.
                            </p>
                            <p><span id="expandIntro" class="intro-toggle">Rozwiń wstęp</span></p>
                            <div id="introFull" class="intro-full">
                                <p>
                                    Wszystko zaczęło się od serii snów o psach. Przez niemal dziesięć nocy z rzędu śniły mi się psy – mnóstwo psów. Nie były wobec mnie agresywne. Czasem atakowały innych ludzi, czasem współpracowały z nimi, pomagając w różnych pracach, ale w każdym z tych snów pojawiał się jeden pies, który próbował wyprowadzić mnie z równowagi. Nie zbliżał się, ale nieustannie szczekał w moim kierunku, drażniąco, chwytał za ogon inne psy lub ludzi, generalnie uprzykrzając życie wszystkim wokół. Budziłem się z tych snów zirytowany jego obecnością, bo zakłócał każdy sen. W ostatnim śnie tej serii zobaczyłem tego psa słabego, niemal umierającego. Zrobiło mi się go żal. Pomogłem mu, choć nie wiem, jak to zrobiłem – leżał prawie martwy, a ja chciałem, by odzyskał siły. Udało się. Gdy tylko pies stanął na nogi, natychmiast wrócił do swojego dawnego zachowania – drażniącego szczekania i biegania wokół mnie, trzymając dystans, ale nie odpuszczając. Po tym śnie postanowiłem, że jeśli pojawi się znowu, nie będę mu pomagał. Byłem gotów pozbyć się go gołymi rękami. Od tamtej pory sny o psach ustały.
                                </p>
                                <p>
                                    Po krótkiej przerwie rozpoczęła się nowa seria snów – tym razem o nieznanych miastach. Śniło mi się, że mieszkam w miejscach, których nie znam, chodzę ulicami, których nigdy nie widziałem. Ten motyw powtarzał się bardzo często, choć nie co noc, przez miesiąc, może nawet dwa. Nie rozpoznawałem żadnego z tych miast, żadnej ulicy, żadnego mieszkania, choć śniło mi się ich kilka. Zazwyczaj widziałem te miejsca nocą, rzadziej w porach popołudniowych. Nigdy wcześniej nie doświadczałem takich powtarzających się schematów w snach. Zastanawiałem się, czy to coś oznacza. W kwietniu 2025 roku dowiedziałem się, że czeka mnie przeprowadzka do nowego mieszkania – w tym samym mieście, ale w innym lokum. Nie wiem, czy sny o miastach były zapowiedzią tej zmiany, ale być może w przyszłości zrozumiem ich znaczenie.
                                </p>
                                <p>
                                    Z czasem sny o miastach zaczęły ewoluować. Nie tylko śniły mi się nieznane miejsca, ale pojawił się nowy motyw – uczelnie. W tych obcych miastach zawsze przewijał się wątek edukacji: szkoły, uczelnie, ludzie, których nie znam. Każda placówka znajdowała się w innym miejscu, w innym mieście, którego nigdy nie widziałem. Nie pamiętam żadnych lekcji, ale pamiętam korytarze, podróże na zajęcia, wychodzenie z uczelni po zakończonych lekcjach. Gdy w drugiej połowie kwietnia 2025 roku zaczynam prowadzić ten dziennik, wątek uczelni wciąż jest obecny, choć motyw nieznanych miast powoli zanika. Teoretycznie każda uczelnia znajduje się w innym miejscu, bo nie rozpoznaję tych przestrzeni, ale coraz mniej skupiam się na samych miastach. Moja uwaga kieruje się na placówki, w których można zdobywać wiedzę – jakby to one stały się sercem moich snów.
                                </p>
                                <p>
                                    Zainspirowany powtarzającymi się snami i schematami, jakich nigdy wcześniej nie znałem, postanowiłem zacząć zapisywać swoje sny. Nie wiem, czy mają jakieś znaczenie, ale ich powtarzalność sprawiła, że uznałem, że warto je notować. Być może kiedyś moje zapiski ujrzą światło dzienne, więc opisuję tylko to, co uważam za stosowne. Unikam imion i tematów zbyt osobistych czy delikatnych, dlatego niektóre fragmenty snów przemilczę. Chcę, by wszystkie osoby pojawiające się w moim dzienniku pozostały anonimowe.
                                </p>
                                <p><span id="collapseIntro" class="intro-toggle">Zwiń wstęp</span></p>
                            </div>
                        </div>
                    </section>

                    <section class="posts-container section-box">
                        <h2>Najnowsze wpisy:</h2>
                        <div id="postsLoading" class="loading-spinner"></div>
                        <div id="postsList" class="posts-list"></div>
                    </section>

                    <section class="archive-container section-box">
                        <h2>Archiwum:</h2>
                        <div id="archiveLoading" class="loading-spinner"></div>
                        <div id="archiveList" class="archive-list"></div>
                    </section>
                </div>
            </main>
        </div>

        <footer class="footer">
            <p>© 2025 Barastion Dreamscape. Wszelkie prawa zastrzeżone.</p>
            <p class="footer-link"><span class="footer-text">Moja główna strona:</span> <a href="https://barastion.github.io/Barastion-Watchtower/" target="_blank">Barastion Watchtower</a></p>
            <p class="footer-link"><a href="#" id="adminLink">Napisz nowy post</a> <span id="logoutLink" class="logout-link">Wyloguj</span></p>
        </footer>
    </div>

    <div id="adminModal" class="modal">
        <div class="modal-content">
            <h2>Zaloguj się</h2>
            <p>Zaloguj się, aby dodać lub edytować post. Dostęp tylko dla autora.</p>
            <button id="googleLogin" class="btn btn-google">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8c2.12 0 4.07.83 5.51 2.19l-2.09 2.09C14.64 6.49 13.38 6 12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.81 0 5.19-1.94 5.83-4.7h-5.83v-2.83h8.66c.07.41.11.84.11 1.28 0 4.41-3.59 8-8 8z"/>
                </svg>
                Zaloguj się przez Google
            </button>
            <p class="modal-note">Tylko autor ma dostęp do edycji.</p>
            <button type="button" class="btn btn-cancel modal-close">Zamknij</button>
        </div>
    </div>

    <div id="postModal" class="modal">
        <div class="modal-content large-modal">
            <h2 id="postModalTitle">Dodaj nowy sen</h2>
            <form id="dreamForm" class="post-form">
                <div class="form-group">
                    <label for="postTitle">Tytuł snu</label>
                    <input type="text" id="postTitle" name="postTitle" placeholder="Np. Lot nad oceanem" required>
                </div>
                <div class="form-group">
                    <label for="dreamDate">Data snu</label>
                    <input type="text" id="dreamDate" name="dreamDate" placeholder="Np. noc z 12 na 13 marca 2025" required>
                </div>
                <div class="form-group">
                    <label for="postNotes">Uwagi:</label>
                    <textarea id="postNotes" name="postNotes" placeholder="Np. Przebudzenie o 3:00, sen kontynuowany po zaśnięciu"></textarea>
                </div>
                <div class="form-group">
                    <label for="postContent">Opis snu</label>
                    <textarea id="postContent" name="postContent" placeholder="Opisz swój sen szczegółowo..." required></textarea>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="btn btn-submit">Zapisz sen</button>
                    <button type="button" id="closeForm" class="btn btn-cancel modal-close">Zamknij</button>
                </div>
                <input type="hidden" id="postId" name="postId">
            </form>
        </div>
    </div>

    <script>
        // Sprawdzanie statusu sieci
        function updateNetworkStatus() {
            const networkStatus = document.getElementById('networkStatus');
            if (navigator.onLine) {
                networkStatus.style.display = 'none';
                networkStatus.textContent = '';
            } else {
                networkStatus.textContent = 'Brak połączenia z internetem';
                networkStatus.style.display = 'block';
            }
        }

        window.addEventListener('online', updateNetworkStatus);
        window.addEventListener('offline', updateNetworkStatus);
        window.addEventListener('load', updateNetworkStatus);

        // Rozwijanie/zwijanie wstępu
        document.addEventListener('DOMContentLoaded', () => {
            const expandIntro = document.getElementById('expandIntro');
            const collapseIntro = document.getElementById('collapseIntro');
            const introFull = document.getElementById('introFull');
            const networkStatus = document.getElementById('networkStatus');

            if (expandIntro && collapseIntro && introFull && networkStatus) {
                expandIntro.addEventListener('click', (e) => {
                    e.preventDefault();
                    introFull.style.display = 'block';
                    expandIntro.parentElement.style.display = 'none';
                    console.log('Rozwinięto wstęp.');
                });
                collapseIntro.addEventListener('click', (e) => {
                    e.preventDefault();
                    introFull.style.display = 'none';
                    expandIntro.parentElement.style.display = 'block';
                    console.log('Zwinięto wstęp.');
                });
            } else {
                console.error('Brak elementów intro:', { expandIntro, collapseIntro, introFull, networkStatus });
                if (networkStatus) {
                    networkStatus.textContent = 'Błąd: Brak elementów wstępu.';
                    networkStatus.style.display = 'block';
                }
            }
        });
    </script>

    <script type="module" src="firebase.js"></script>
</body>
</html>
